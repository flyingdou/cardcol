<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>健身E卡通购健身卡促销活动</title>
<meta name="description" content="购买健身卡赠送健身E卡通王严健身专家系统优惠券" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<meta name="apple-mobile-web-app-capable" content="yes">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7fdafa68ef864d4f5eef3bd44e6c3ce9";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();

var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cspan id='cnzz_stat_icon_1263359227'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/stat.php%3Fid%3D1263359227%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
document.querySelector("#cnzz_stat_icon_1263359227").style.display = "none";
</script>

<style type="text/css">
	html,body{
		width:100%;
		height:100%;
		margin:0;
		padding:0;
	}
	
	.wraper{
	   padding-bottom: 20px;
	}
	
	.logo{
		width:50%;
		margin-top: 15px;
		margin-left: 12px;
	}
	.divs{
		width:84%;
		margin: 0 auto;
	}
	.inputs{
		border: 0;
	  border-bottom: 1px solid #bbb;
	  font-size: 15px;
	  height: 30px;
	  line-height: 30px;
	}
	.mobile{
	  width:100%;
	  margin-top:60px;
	}
	.password{
		width: 100%;
		margin-top:30px;
	}
	.code{
		width: 60%;
		margin-top: 30px;
	}
	.getCode{
		color:#fb3922;
	}
	.next{
		width:125px;
		height: 30px;
		line-height: 30px;
		margin: 0 auto;
		margin-top: 30px;
		background-color: #fb5b1a;
		border: 0;
		color: #fff;
		text-align: center;
		border-radius: 5px;
	}
	
	.dou-haha{
	   width: 100%;
	   height: 10px;
	   background: #F1F1F2;
	}
	
	
	.remind{
	   width: 100%;
	}
	
	.dou-remind{
	   padding: 4% 8%;
	}
	
	.remind-title{
	   width: 100%;
	   font-size: 16px;
	   color: #fb5b1a;
	}
	
	.dou-hahad{
	   width: 100%;
	   height: 10px;
	}
	
	.remind-text{
	  font-size: 15px;
	  color: #737070;
	}
	
</style>
</head>
<body>
	<div class="wraper" id = "app">
		<div class="div-logo"> 
			<img src="img/adwy-11.png" class="logo">
		</div>
		<div class="div-mobile divs">
			<input type="number" class="mobile inputs" placeholder="请输入手机号"  v-model="model.mobilephone" />
		</div>
		<div class="div-code divs">
		  <input type="number" class="code inputs" placeholder="请输入验证码" v-model="model.code" />
		  <span class="getCode" id = "getCode" onclick="getMobileCode(this)">获取验证码</span>
		</div>
		<div class="div-password divs">
		  <input type="password" class="password inputs" placeholder="请设置登录密码" v-model="model.password" />
		</div>
		<div class="div-next divs" onclick="register()" >
		  <div class="next">下一步</div>
		</div>
	</div>
	<div class="dou-haha"></div>
	<div class="remind">
			  <div class="dou-remind">
				   <span class="remind-title">温馨提示</span>
				   <br>
				   <div class="dou-hahad"></div>
				   <span class="remind-text">
				   		1、注册后完成支付即成功购买您选择的健身卡。
				   </span>
				   <br>
				   <span class="remind-text">
				        2、购卡后下载“健身E卡通APP”，使用本页注册的手机和密码登录即可在俱乐部扫码签到。
				   </span>
				   <br>
				   <span class="remind-text">
				        3、在“健身E卡通APP”中可以查看获得的优惠券，该券用于支付王严专家系统，自动生成健身计划。
				   </span>
				   <br>
			  </div>
		</div>
	
	
	<!-- javascript start -->
	<script src="js/jquery.min.js" ></script>
	<script src="js/vue.min.js" ></script>
	<script>
	    // 创建vue全局变量
	    var vue = new Vue({
	    	el:"#app",
	    	data:{
	    		model:{}
	    	}
	    	
	    });
	    
	    
	    var x = 0;
	    //获取验证码
	    function getMobileCode(obj) {
	    	if (vue.model.mobilephone == undefined || vue.model.mobilephone == "") {
	    		alert("请填写手机号！");
	    		return;
	    	}
	    	
	    	//x大于0时不发验证码
	    	if (x > 0){
	    		return;
	    	}
	    	//发送验证码
	    	$.ajax({
	    		url:"eloginwx!getMobileCode.asp",
	    		type:"post",
	    		data: {
	    			mobilephone: vue.model.mobilephone
	    		},
	    		dataType: "json",
	    		success: function (codeRes) {
	    			if (codeRes.success) {
	    				alert("验证码已发送至您的手机，请注意查收！");
	    				
	    				//倒计时
						x = 60;
						setTimeout(function(){
							$("#getCode").html(x);
							x--;
							if( x > 0){
								$(obj).html("重新发送(" + x + ")"); 
								$(obj).css("color","#c4c3c3");
								setTimeout(arguments.callee,1000);
							}else{
								$(obj).html("获取验证码"); 
								$(obj).css("color","#fb3922");
								x = 0; 
							}
						},0);
						
	    			} else {
	    				alert("发送验证码过于频繁，请在1小时后操作！");
	    				return;
	    			}
	    		},
	    		error: function (codeE) {
	    			alert("网络异常！ 原因：" + JSON.stringify(codeE));
	    		}
	    		
	    	});
	    }
	    
	    
	    
	    //当用户点击下一步时，校验用户表单数据，并提交后台处理
	    function register(){
	    	var dou = vue.model;
	    	if (dou.mobilephone == undefined || dou.mobilephone == "") {
	    		alert("请填写手机号！");
	    		return;
	    	}
	    	if (dou.code == undefined || dou.code == "") {
	    		alert("请填写验证码！");
	    		return;
	    	}
	    	if (dou.password == undefined || dou.password == "") {
	    		alert("请填写密码！");
	    		return;
	    	}
	    	
	    	// 提交后台验证用户
	    	$.ajax({
	    		url:"eloginwx!registerOrLoad.asp",
	    		type:"post",
	    		data:{
	    			jsons:encodeURI(JSON.stringify(dou))
	    		},
	    		dataType:"json",
	    		success: function (res) {
	    			if (res.success) {
	    				//验证用户成功，跳转到下一面
	    				location.href = "adwy3.html";
	    			} else {
	    				alert(res.message);
	    				return;
	    			}
	    		},
	    		error: function (e) {
	    			alert("网络不可用！");
	    		}
	    		
	    	});
	    }
	    
	    
	
	</script>
	
	
	
	
</body>
</html>